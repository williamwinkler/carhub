openapi: 3.0.0
paths:
  /v1/auth/login:
    post:
      operationId: AuthController_login_v1
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginDto"
      responses:
        "201":
          description: User successfully logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JwtResponseDto"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
      tags: &a1
        - Auth
  /v1/auth/refresh:
    post:
      operationId: AuthController_refresh_v1
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefreshTokenDto"
      responses:
        "201":
          description: Session succesfully refreshed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JwtResponseDto"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
      tags: *a1
  /v1/auth/logout:
    post:
      operationId: AuthController_logout_v1
      parameters: []
      responses:
        "204":
          description: User logged out successfully
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
      security:
        - bearer: []
      tags: *a1
  /v1/users/me:
    get:
      operationId: UsersController_getMe_v1
      parameters: []
      responses:
        "200":
          description: Successfully retrieved user details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MeResponseDto"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
      security:
        - bearer: []
      tags:
        - Users
  /v1/cars:
    post:
      operationId: CarsController_create_v1
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCarDto"
      responses:
        "201":
          description: Car created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarResponseDto"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
      security:
        - bearer: []
      summary: Create a car
      tags: &a2
        - Cars
    get:
      operationId: CarsController_findAll_v1
      parameters:
        - name: sortDirection
          required: false
          in: query
          description: Sort direction (ascending or descending)
          schema:
            type: string
        - name: sortField
          required: false
          in: query
          description: Field to sort by
          schema:
            type: string
        - name: limit
          required: false
          in: query
          description: The limit of items to be returned.
          schema:
            type: string
        - name: skip
          required: false
          in: query
          description: The amount of items to skip.
          schema:
            type: string
        - name: color
          required: false
          in: query
          description: The color of the car.
          schema:
            type: string
            maxLength: 100
        - name: model
          required: false
          in: query
          description: The model of the car.
          schema:
            type: string
            minLength: 1
            maxLength: 100
        - name: brand
          required: false
          in: query
          description: The brand of the car.
          schema:
            type: string
      responses:
        "200":
          description: List of cars
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarResponseListDto"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
      summary: List cars
      tags: *a2
  /v1/cars/{id}:
    get:
      operationId: CarsController_findOne_v1
      parameters:
        - name: id
          required: true
          in: path
          description: id (UUID)
          schema:
            type: string
      responses:
        "200":
          description: Car successfully retrieved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarResponseDto"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
      summary: Get a car
      tags: *a2
    put:
      operationId: CarsController_update_v1
      parameters:
        - name: id
          required: true
          in: path
          description: id (UUID)
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateCarDto"
      responses:
        "200":
          description: The car was successfully updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarResponseDto"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
      security:
        - bearer: []
      summary: Update a car
      tags: *a2
    delete:
      operationId: CarsController_remove_v1
      parameters:
        - name: id
          required: true
          in: path
          description: id (UUID)
          schema:
            type: string
      responses:
        "204":
          description: Car deleted successfully
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorDto"
      security:
        - bearer: []
      summary: Delete a car
      tags: *a2
info:
  title: ðŸ”¥ Next Gen Nestjs API
  description: Demo API to showcase autogenerated Swagger docs from Zod schemas and tRPC.
  version: 1.0.0
  contact: {}
tags: []
servers: []
components:
  securitySchemes:
    bearer:
      scheme: bearer
      bearerFormat: JWT
      type: http
    api_key:
      type: apiKey
      in: header
      name: x-api-key
  schemas:
    ErrorDto:
      type: object
      properties:
        statusCode:
          description: The HTTP status code
          type: number
          enum:
            - 100
            - 101
            - 102
            - 103
            - 200
            - 201
            - 202
            - 203
            - 204
            - 205
            - 206
            - 207
            - 208
            - 210
            - 300
            - 301
            - 302
            - 303
            - 304
            - 307
            - 308
            - 400
            - 401
            - 402
            - 403
            - 404
            - 405
            - 406
            - 407
            - 408
            - 409
            - 410
            - 411
            - 412
            - 413
            - 414
            - 415
            - 416
            - 417
            - 418
            - 421
            - 422
            - 423
            - 424
            - 428
            - 429
            - 456
            - 500
            - 501
            - 502
            - 503
            - 504
            - 505
            - 507
            - 508
        errorCode:
          description: The application specific error code
          type: number
          enum:
            - 1000
            - 1001
            - 1002
            - 1003
            - 1004
            - 2000
            - 2001
            - 2002
            - 3000
            - 3001
            - 4000
        message:
          description: The error message
          type: string
        errors:
          description: Zod validation errors
          type: array
          items: {}
      required:
        - statusCode
        - errorCode
        - message
    LoginDto:
      type: object
      properties:
        username:
          description: The username of the user
          type: string
          minLength: 1
          maxLength: 80
        password:
          description: The password of the user
          type: string
          minLength: 5
          maxLength: 255
      required:
        - username
        - password
    JwtDto:
      type: object
      properties:
        accessToken:
          type: string
          format: jwt
        refreshToken:
          type: string
          format: jwt
      required:
        - accessToken
        - refreshToken
    JwtResponseDto:
      type: object
      properties:
        apiVersion:
          type: string
          description: The version of the API
          example: 1.0.0
        data:
          description: The data of the response
          allOf:
            - $ref: "#/components/schemas/JwtDto"
      required:
        - apiVersion
        - data
    RefreshTokenDto:
      type: object
      properties:
        refreshToken:
          type: string
          format: jwt
      required:
        - refreshToken
    MeDto:
      type: object
      properties:
        id:
          type: string
          format: uuid
          pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$
        firstName:
          type: string
        lastName:
          type: string
        role:
          type: string
          enum:
            - admin
            - user
      required:
        - id
        - firstName
        - lastName
        - role
    MeResponseDto:
      type: object
      properties:
        apiVersion:
          type: string
          description: The version of the API
          example: 1.0.0
        data:
          description: The data of the response
          allOf:
            - $ref: "#/components/schemas/MeDto"
      required:
        - apiVersion
        - data
    CreateCarDto:
      type: object
      properties:
        brand:
          description: The brand of the car.
          type: string
          enum:
            - BMW
            - Mercedes
            - Porsche
            - Audi
            - Toyota
            - Honda
            - Ford
            - Tesla
            - Volkswagen
          x-nestjs_zod-parent-additional-properties: false
        model:
          description: The model of the car.
          type: string
          minLength: 1
          maxLength: 100
          x-nestjs_zod-parent-additional-properties: false
        year:
          description: The year the it was manufactored.
          type: integer
          minimum: 1886
          maximum: 2026
          x-nestjs_zod-parent-additional-properties: false
        color:
          description: The color of the car.
          type: string
          minLength: 0
          maxLength: 100
          x-nestjs_zod-parent-additional-properties: false
        kmDriven:
          type: integer
          minimum: 0
          maximum: 10000000
          x-nestjs_zod-parent-additional-properties: false
        price:
          type: number
          minimum: 0
          x-nestjs_zod-parent-additional-properties: false
      required:
        - brand
        - model
        - year
        - color
        - kmDriven
        - price
    CarDto:
      type: object
      properties:
        brand:
          description: The brand of the car.
          type: string
          enum:
            - BMW
            - Mercedes
            - Porsche
            - Audi
            - Toyota
            - Honda
            - Ford
            - Tesla
            - Volkswagen
          x-nestjs_zod-parent-additional-properties: false
        model:
          description: The model of the car.
          type: string
          minLength: 1
          maxLength: 100
          x-nestjs_zod-parent-additional-properties: false
        year:
          description: The year the it was manufactored.
          type: integer
          minimum: 1886
          maximum: 2026
          x-nestjs_zod-parent-additional-properties: false
        color:
          description: The color of the car.
          type: string
          minLength: 0
          maxLength: 100
          x-nestjs_zod-parent-additional-properties: false
        kmDriven:
          type: integer
          minimum: 0
          maximum: 10000000
          x-nestjs_zod-parent-additional-properties: false
        price:
          type: number
          minimum: 0
          x-nestjs_zod-parent-additional-properties: false
        id:
          description: The unique id of the car (UUID)
          type: string
          format: uuid
          pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$
          x-nestjs_zod-parent-additional-properties: false
        createdBy:
          description: The user who created this car
          type: string
          format: uuid
          pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$
          x-nestjs_zod-parent-additional-properties: false
        createdAt:
          description: When the car record was created
          type: string
          format: date-time
          pattern: ^(?:(?:\d\d[2468][048]|\d\d[13579][26]|\d\d0[48]|[02468][048]00|[13579][26]00)-02-29|\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\d|30)|(?:02)-(?:0[1-9]|1\d|2[0-8])))T(?:(?:[01]\d|2[0-3]):[0-5]\d(?::[0-5]\d(?:\.\d+)?)?(?:Z))$
          x-nestjs_zod-parent-additional-properties: false
        updatedBy:
          description: The user who last updated this car
          type: string
          format: uuid
          pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$
          x-nestjs_zod-parent-additional-properties: false
        updatedAt:
          description: When the car record was last updated
          type: string
          format: date-time
          pattern: ^(?:(?:\d\d[2468][048]|\d\d[13579][26]|\d\d0[48]|[02468][048]00|[13579][26]00)-02-29|\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\d|30)|(?:02)-(?:0[1-9]|1\d|2[0-8])))T(?:(?:[01]\d|2[0-3]):[0-5]\d(?::[0-5]\d(?:\.\d+)?)?(?:Z))$
          x-nestjs_zod-parent-additional-properties: false
        favoritedBy:
          description: List of user IDs who favorited this car
          default: []
          type: array
          items:
            type: string
            format: uuid
            pattern: ^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$
          x-nestjs_zod-parent-additional-properties: false
      required:
        - brand
        - model
        - year
        - color
        - kmDriven
        - price
        - id
        - createdBy
        - createdAt
    CarResponseDto:
      type: object
      properties:
        apiVersion:
          type: string
          description: The version of the API
          example: 1.0.0
        data:
          description: The data of the response
          allOf:
            - $ref: "#/components/schemas/CarDto"
      required:
        - apiVersion
        - data
    MetaPaginationDto:
      type: object
      properties:
        total:
          type: number
          description: The total number of items available across all pages
        limit:
          type: number
          description: The limit of items
        skipped:
          type: number
          description: Items skipped
        count:
          type: number
          description: The count of items
      required:
        - total
        - limit
        - skipped
        - count
    PaginatedItemsDto:
      type: object
      properties:
        meta:
          description: Metadata for pagination
          allOf:
            - $ref: "#/components/schemas/MetaPaginationDto"
        items:
          description: List of CarDto items
          type: array
          items:
            $ref: "#/components/schemas/CarDto"
      required:
        - meta
        - items
    CarResponseListDto:
      type: object
      properties:
        apiVersion:
          type: string
          description: The version of the API
          example: 1.0.0
        data:
          description: The data of the response
          allOf:
            - $ref: "#/components/schemas/PaginatedItemsDto"
      required:
        - apiVersion
        - data
    UpdateCarDto:
      type: object
      properties:
        brand:
          description: The brand of the car.
          type: string
          enum:
            - BMW
            - Mercedes
            - Porsche
            - Audi
            - Toyota
            - Honda
            - Ford
            - Tesla
            - Volkswagen
          x-nestjs_zod-parent-additional-properties: false
        model:
          description: The model of the car.
          type: string
          minLength: 1
          maxLength: 100
          x-nestjs_zod-parent-additional-properties: false
        year:
          description: The year the it was manufactored.
          type: integer
          minimum: 1886
          maximum: 2026
          x-nestjs_zod-parent-additional-properties: false
        color:
          description: The color of the car.
          type: string
          minLength: 0
          maxLength: 100
          x-nestjs_zod-parent-additional-properties: false
        kmDriven:
          type: integer
          minimum: 0
          maximum: 10000000
          x-nestjs_zod-parent-additional-properties: false
        price:
          type: number
          minimum: 0
          x-nestjs_zod-parent-additional-properties: false
