openapi: 3.0.0
paths:
  /api/v1/cars:
    post:
      operationId: CarsController__v1
      parameters: []
      responses:
        "201":
          description: Car created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseDto"
      summary: Create a car
      tags: &a1
        - Cars
    get:
      operationId: CarsController__v1
      parameters:
        - name: limit
          required: false
          in: query
          description: The limit of items to be returned.
          schema:
            type: string
        - name: skip
          required: false
          in: query
          description: The amount of items to skip.
          schema:
            type: string
        - name: color
          required: false
          in: query
          description: The color of the car.
          schema:
            type: string
        - name: model
          required: false
          in: query
          description: The model of the car.
          schema:
            type: string
        - name: brand
          required: false
          in: query
          description: The brand of the car.
          schema:
            enum:
              - BMW
              - Mercedes
              - Porsche
              - Audi
              - Toyota
              - Honda
              - Ford
              - Tesla
              - Volkswagen
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseListDto"
        "400":
          description: Bad request error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestErrorResponse"
      summary: List cars
      tags: *a1
  /api/v1/cars/{id}:
    get:
      operationId: CarsController__v1
      parameters:
        - name: id
          required: true
          in: path
          description: id (UUID)
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CarDto"
        "400":
          description: Bad request error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundErrorResponse"
      summary: Get a car
      tags: *a1
    put:
      operationId: CarsController__v1
      parameters:
        - name: id
          required: true
          in: path
          description: id (UUID)
          schema:
            type: string
      responses:
        "200":
          description: Car succesfully updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseDto"
      summary: Update a car
      tags: *a1
    delete:
      operationId: CarsController__v1
      parameters:
        - name: id
          required: true
          in: path
          description: id (UUID)
          schema:
            type: string
      responses:
        "204":
          description: Car deleted successfully
        "400":
          description: Bad request error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundErrorResponse"
      summary: Delete a car
      tags: *a1
info:
  title: ðŸ”¥ Next Gen Nestjs API
  description: Demo API to showcase autogenerated Swagger docs from Zod schemas and tRPC.
  version: 0.0.1
  contact: {}
tags: []
servers: []
components:
  schemas:
    CarDto:
      type: object
      properties:
        brand:
          description: The brand of the car.
          type: string
          enum:
            - BMW
            - Mercedes
            - Porsche
            - Audi
            - Toyota
            - Honda
            - Ford
            - Tesla
            - Volkswagen
          x-enumNames:
            - BMW
            - Mercedes
            - Porsche
            - Audi
            - Toyota
            - Honda
            - Ford
            - Tesla
            - Volkswagen
        model:
          description: The model of the car.
          type: string
          minLength: 1
          maxLength: 100
        year:
          description: The year the it was manufactored.
          type: integer
          minimum: 1886
          exclusiveMinimum: false
          maximum: 2026
          exclusiveMaximum: false
        color:
          description: The color of the car.
          type: string
          minLength: 0
          maxLength: 100
        kmDriven:
          type: integer
          minimum: 0
          exclusiveMinimum: false
        price:
          type: number
          minimum: 0
          exclusiveMinimum: false
        id:
          description: The unique id of the car (UUID)
          type: string
          format: uuid
      required:
        - brand
        - model
        - year
        - color
        - kmDriven
        - price
        - id
    ResponseDto:
      type: object
      properties:
        apiVersion:
          type: string
          description: The version of the API
        data:
          description: The data from the API
          allOf:
            - $ref: "#/components/schemas/CarDto"
      required:
        - apiVersion
        - data
    BadRequestErrorItem:
      type: object
      properties:
        code:
          type: string
          example: invalid_enum_value
        path:
          example:
            - brand
          type: array
          items:
            type: string
        message:
          type: string
          example: Invalid enum value. Expected 'BMW' | 'Audi', received 'Tesla'
        received:
          type: object
          example: Tesla
          nullable: true
        options:
          example:
            - BMW
            - Audi
          nullable: true
          type: array
          items:
            type: string
      required:
        - code
        - path
        - message
        - received
        - options
    BadRequestErrorResponse:
      type: object
      properties:
        statusCode:
          type: number
          example: 400
        errorCode:
          type: number
          example: 100
          description: Custom application error code
          enum:
            - 100
            - 101
        message:
          type: string
          example: Validation failed
        errors:
          type: array
          items:
            $ref: "#/components/schemas/BadRequestErrorItem"
      required:
        - statusCode
        - errorCode
        - message
        - errors
    MetaPaginationDto:
      type: object
      properties:
        totalItems:
          type: number
          description: The total number of items available across all pages
        limit:
          type: number
          description: The limit of items
        skipped:
          type: number
          description: Items skipped
        count:
          type: number
          description: The count of items
      required:
        - totalItems
        - limit
        - skipped
        - count
    PaginatedItemsDto:
      type: object
      properties:
        meta:
          description: Metadata for pagination
          allOf:
            - $ref: "#/components/schemas/MetaPaginationDto"
        items:
          description: List of items
          type: array
          items:
            $ref: "#/components/schemas/CarDto"
      required:
        - meta
        - items
    ResponseListDto:
      type: object
      properties:
        apiVersion:
          type: string
          description: The version of the API
        data:
          description: The data from the API
          allOf:
            - $ref: "#/components/schemas/PaginatedItemsDto"
      required:
        - apiVersion
        - data
    NotFoundErrorResponse:
      type: object
      properties:
        type:
          type: string
          example: Car
        message:
          type: string
          example: Car could not be found
      required:
        - message
